# coding: utf-8
#
# from rest_framework.authentication import TokenAuthentication
# from rest_framework.authtoken.models import Token
# from rest_framework.authentication import SessionAuthentication
# from rest_framework.authentication import BasicAuthentication
#
# from rest_framework.authentication import TokenAuthentication
#
# from django.contrib.auth.middleware import AuthenticationMiddleware
# from django.contrib.sessions.middleware import SessionMiddleware
# from django.middleware.csrf import CsrfViewMiddleware
#
# from django_user_agents.middleware import UserAgentMiddleware


# import json
# import pickle
#
# data = {
#     'key1': 'value1',
#     'key2': 'value2'
# }
#
# ret = json.dumps(data)
#
# print(ret.encode('utf-8'))
# print(type(ret.encode('utf-8')))
#
# ret1 = pickle.dumps(data)
# print(ret1)
# print(type(ret1))



ss = """
\r\n    \r\n\r\n\r\n<!DOCTYPE HTML>\r\n<html>\r\n<head>\r\n    <meta charset=\"gb2312\" />\r\n    <meta name=\"keywords\" content=\"\" />\r\n    <meta name=\"description\" content=\"\" />\r\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\" />\r\n    <title>支付宝 - 网上支付 安全快速！</title>\r\n    <link rel=\"icon\" href=\"https://i.alipayobjects.com/common/favicon/favicon.ico\" type=\"image/x-icon\" />\r\n    <link rel=\"shortcut icon\" href=\"https://i.alipayobjects.com/common/favicon/favicon.ico\" type=\"image/x-icon\" />\r\n    <link href=\"https://a.alipayobjects.com\" rel=\"dns-prefetch\" />\n<link href=\"https://app.alipay.com\" rel=\"dns-prefetch\" />\n<link href=\"https://my.alipay.com\" rel=\"dns-prefetch\" />\n<link href=\"https://lab.alipay.com\" rel=\"dns-prefetch\" />\n<link href=\"https://cashier.alipay.com\" rel=\"dns-prefetch\" />\n<link href=\"https://financeprod.alipay.com\" rel=\"dns-prefetch\" />\n<link href=\"https://shenghuo.alipay.com\" rel=\"dns-prefetch\" />\n\n\n<!-- uitpl:/component/trackerTime.vm -->\n    <style>\n@font-face {\n    font-family: \"rei\";\n    src: url(\"https://i.alipayobjects.com/common/fonts/rei.eot?20150616\"); /* IE9 */\n    src: url(\"https://i.alipayobjects.com/common/fonts/rei.eot?20150616#iefix\") format(\"embedded-opentype\"), /* IE6-IE8 */\n    url(\"https://i.alipayobjects.com/common/fonts/rei.woff?20150616\") format(\"woff\"), /* chrome 6+、firefox 3.6+、Safari5.1+、Opera 11+ */\n    url(\"https://i.alipayobjects.com/common/fonts/rei.ttf?20150616\")  format(\"truetype\"), /* chrome、firefox、opera、Safari, Android, iOS 4.2+ */\n    url(\"https://i.alipayobjects.com/common/fonts/rei.svg?20150616#rei\") format(\"svg\"); /* iOS 4.1- */\n}\n.iconfont {\n    font-family:\"rei\";\n    font-style: normal;\n    font-weight: normal;\n    cursor: default;\n    -webkit-font-smoothing: antialiased;\n}\n</style>\n\n<script type=\"text/javascript\">\n  window._to = { start: new Date() };\n</script>\n\n<script type=\"text/javascript\">\n\n!function(n){function o(r){if(t[r])return t[r].exports;var i=t[r]={exports:{},id:r,loaded:!1};return n[r].call(i.exports,i,i.exports,o),i.loaded=!0,i.exports}var t={};return o.m=n,o.c=t,o.p=\"\",o(0)}([function(n,o){\"use strict\";window.Sai={log:function(){},error:function(){},lost:function(){},off:function(){},on:function(){},_DATAS:[],_EVENTS:[]}}]);\n\n</script>\n\n\n\n\n<!-- monitor 防错代码 -->\n<script>\n(function(win){\n  if(!win.monitor){win.monitor = {};}\n\n  var METHODS = [\"lost\", \"log\", \"error\", \"on\", \"off\"];\n\n  for(var i=0,method,l=METHODS.length; i<l; i++){\n    method = METHODS[i];\n    if(\"function\" !== typeof win.monitor[method]){\n      win.monitor[method] = function(){};\n    }\n  }\n})(window);\n</script>\n\n<!-- seajs以及插件 -->\n<script charset=\"utf-8\" crossorigin=\"anonymous\" id=\"seajsnode\" onerror=\"window.monitor && monitor.lost && monitor.lost(this.src)\" src=\"https://a.alipayobjects.com:443/??seajs/seajs/2.2.3/sea.js,seajs/seajs-combo/1.0.0/seajs-combo.js,seajs/seajs-style/1.0.2/seajs-style.js,seajs/seajs-log/1.0.0/seajs-log.js,jquery/jquery/1.7.2/jquery.js,gallery/json/1.0.3/json.js,alipay-request/3.0.3/index.js\"></script>\n\n<!-- seajs config 配置 -->\n<script>\nseajs.config({\n  alias: {\n    '$': 'jquery/jquery/1.7.2/jquery',\n    '$-debug': 'jquery/jquery/1.7.2/jquery',\n    'jquery': 'jquery/jquery/1.7.2/jquery',\n    'jquery-debug': 'jquery/jquery/1.7.2/jquery-debug',\n    'seajs-debug': 'seajs/seajs-debug/1.1.1/seajs-debug'\n  },\n  crossorigin: function(uri){\n\n    function typeOf(type){\n\t  return function(object){\n\t    return Object.prototype.toString.call(object) === '[object ' + type + ']';\n\t  }\n\t}\n\tvar isString = typeOf(\"String\");\n\tvar isRegExp = typeOf(\"RegExp\");\n\n\tvar whitelist = [];\n\n  whitelist.push('https://a.alipayobjects.com/');\n\n\tfor (var i=0, rule, l=whitelist.length; i<l; i++){\n\t  rule = whitelist[i];\n\t  if (\n\t    (isString(rule) && uri.indexOf(rule) === 0) ||\n\t    (isRegExp(rule) && rule.test(uri))\n\t\t) {\n\n\t    return \"anonymous\";\n\t  }\n\t}\n  },\n  vars: {\n    locale: 'zh-cn'\n  }\n});\n</script>\n\n<!-- 兼容原有的 plugin-i18n 写法 -->\n<!-- https://github.com/seajs/seajs/blob/1.3.1/src/plugins/plugin-i18n.js -->\n<script>\nseajs.pluginSDK = seajs.pluginSDK || {\n  Module: {\n    _resolve: function() {}\n  },\n  config: {\n    locale: ''\n  }\n};\n// 干掉载入 plugin-i18n.js，避免 404\nseajs.config({\n  map: [\n\t[/^.*\/seajs\/plugin-i18n\\.js$/, ''],\n\t[/^.*\\i18n!lang\\.js$/, '']\n  ]\n});\n</script>\n\n<!-- 路由旧 ID，解决 seajs.use('select/x.x.x/select') 的历史遗留问题 -->\n<script>\n(function(){\n\nvar JQ = '/jquery/1.7.2/jquery.js';\nseajs.cache['https://a.alipayobjects.com:443/gallery' + JQ] = seajs.cache['https://a.alipayobjects.com:443/jquery' + JQ];\n\nvar GALLERY_MODULES = [\n  'async','backbone','coffee','cookie','es5-safe','handlebars','iscroll',\n  'jasmine','jasmine-jquery','jquery','jquery-color','json','keymaster',\n  'labjs','less','marked','moment','mustache','querystring','raphael',\n  'socketio','store','swfobject','underscore','zepto','ztree'\n];\n\nvar ARALE_MODULES = [\n  'autocomplete','base','calendar','class','cookie','dialog','easing',\n  'events','iframe-uploader','iframe-shim','messenger','overlay','popup',\n  'position','select','switchable','tip','validator','widget'\n];\n\nvar util = {};\nutil.indexOf = Array.prototype.indexOf ?\n  function(arr, item) {\n    return arr.indexOf(item);\n  } :\n  function(arr, item) {\n    for (var i = 0; i < arr.length; i++) {\n      if (arr[i] === item) {\n        return i;\n      }\n    }\n    return -1;\n  };\nutil.map = Array.prototype.map ?\n  function(arr, fn) {\n    return arr.map(fn);\n  } :\n  function(arr, fn) {\n    var ret = [];\n\tfor (var i = 0; i < arr.length; i++) {\n        ret.push(fn(arr[i], i, arr));\n    }\n    return ret;\n  };\n\nfunction contains(arr, item) {\n  return util.indexOf(arr, item) > -1\n}\n\nfunction map(id) {\n  id = id.replace('#', '');\n\n  var parts = id.split('/');\n  var len = parts.length;\n  var root, name;\n\n  // id = root/name/x.y.z/name\n  if (len === 4) {\n    root = parts[0];\n    name = parts[1];\n\n    // gallery 或 alipay 开头的没有问题\n    if (root === 'alipay' || root === 'gallery') {\n      return id;\n    }\n\n    // arale 开头的\n    if (root === 'arale') {\n      // 处理 arale/handlebars 的情况\n      if (contains(GALLERY_MODULES, name)) {\n        return id.replace('arale/', 'gallery/');\n      } else {\n        return id;\n      }\n    }\n  }\n  // id = name/x.y.z/name\n  else if (len === 3) {\n    name = parts[0]\n\n    // 开头在 GALLERY_MODULES 或 ARALE_MODULES\n    if (contains(GALLERY_MODULES, name)) {\n      return 'gallery/' + id;\n    } else if (contains(ARALE_MODULES, name)) {\n      return 'arale/' + id;\n    }\n  }\n\n  return id;\n}\n\nvar _use = seajs.use;\n\nseajs.use = function(ids, callback) {\n  if (typeof ids === 'string') {\n    ids = [ids];\n  }\n\n  ids = util.map(ids, function(id) {\n    return map(id);\n  });\n\n  return _use(ids, callback);\n}\n\n})();\n</script>\n\n<script charset=\"utf-8\" crossorigin=\"crossorigin\" src=\"https://a.alipayobjects.com/static/ar/alipay.light.base-1.8.js\"></script>\n\n\n<script type=\"text/javascript\">\nif (!window._to) {\n  window._to = { start: new Date() };\n}\n</script>\n\n<script charset=\"utf-8\" src=\"https://as.alipayobjects.com/??g/component/tracker/2.3.2/index.js,g/component/smartracker/2.0.2/index.js\"></script>\n<script charset=\"utf-8\" src=\"https://a.alipayobjects.com/g/utiljs/rd/1.0.2/rd.js\"></script>\n\n\n\n<script>\n  window.Tracker && Tracker.start &&  Tracker.start();\n</script>\n\n\n\n\n\n\n\n\n    <link charset=\"utf-8\" rel=\"stylesheet\" href=\"https://a.alipayobjects.com:443/excashier/front/1.0.0/front-qrcode.css\" media=\"all\" />\n\r\n    <style>\r\n    .qrcode-independence .qrcode-header {\n    padding: 0px 0 10px 0;\n}\n\n.tb-inner {\n    padding: 10px 20px;\n}\n\n.tb-inner table {\n    border-right: 1px solid #c8c8c8;\n    border-bottom: 1px solid #c8c8c8;\n}\n\n.tb-inner td, .tb-inner thead th {\n    border-top: 1px solid #c8c8c8;\n    border-left: 1px solid #c8c8c8;\n}\n\n\r\n    </style>\r\n    <!-- CMS:全局日志入口开始:excashier/globalLog/log.vm -->  <style>body #onlineService{display:none}</style><!-- CMS:全局日志入口结束:excashier/globalLog/log.vm --></head>\r\n<body>\r\n\r\n\r\n\r\n\r\n<div id=\"container\">\r\n\r\n    <div id=\"J_qrPayOrder\">\r\n\r\n        \r\n        <input name=\"timeoutMillseconds\" type=\"hidden\" value=\"1344708\"\r\n               id=\"J_timeoutMillseconds\"/>\r\n        <input name=\"orderDeadline\" type=\"hidden\" value=\"\"\r\n               id=\"J_orderDeadline\"/>\r\n        <!-- 由于嵌入式二维码跳转到超时链接会超出预留的空间，因此直接将跳转链接传空 -->\r\n        <input name=\"timeoutUrl\" type=\"hidden\" value=\"\" id=\"J_timeoutUrl\"/>\r\n        <input name=\"qrCode\" type=\"hidden\" value=\"https://qr.alipay.com/upx4sru9wb02akow84\" id=\"J_qrCode\"/>\r\n        <input name=\"qrImgUrl\" type=\"hidden\" value=\"http://mobilecodec.alipaydev.com/show.htm?code=upx4sru9wb02akow84&amp;picSize=M\" id=\"J_qrImgUrl\"/>\r\n        <input name=\"qrUseImage\" type=\"hidden\" value=\"false\" id=\"J_qrUseImage\"/>\r\n        <input name=\"qrContextId\" type=\"hidden\" value=\"20201124-2-2-3.d006ed6df0dfe690000\" id=\"J_qrContextId\"/>\r\n        <input name=\"qrRenewalURL\" type=\"hidden\" value=\"https://excashier.alipaydev.com:443/standard/renewQRCode.json?payOrderId=97ee6c5610b54942846b14d5d19bba62.00\" id=\"J_qrRenewalURL\"/>\r\n        <input name=\"qrPushCheckURL\" type=\"hidden\" value=\"\" id=\"J_qrPushCheckURL\"/>\r\n        <input name=\"qrLoopCheckURL\" type=\"hidden\" value=\"https://excashier.alipaydev.com:443/standard/queryQRStatus.json?payOrderId=97ee6c5610b54942846b14d5d19bba62.00\" id=\"J_qrLoopCheckURL\"/>\r\n        <input name=\"qrPaySuccGotoURL\" type=\"hidden\" value=\"https://unitradeprod.alipaydev.com:443/acq/cashierReturn.htm?sign=K1iSL1gn5tqoro5vZk9m3P8qYjp0uIAm26YDgazitpPwIO0pdO4rNVy3naRlz%252BkZXwo%253D&amp;outTradeNo=O160620884181294&amp;pid=2088102171317030&amp;type=1\"\r\n               id=\"J_qrPaySuccGotoURL\"/>\r\n        <input name=\"resultPageStayTime\"  type=\"hidden\" value=\"5\"\tid=\"J_resultPageStayTime\" />\r\n        <input name=\"qrCheckMode\" type=\"hidden\" value=\"LOOP\" id=\"J_qrCheckMode\"/>\r\n        <input name=\"qrExpirySeconds\" type=\"hidden\" value=\"18\" id=\"J_qrExpirySeconds\"/>\r\n        <input name=\"qrLogonId\" type=\"hidden\" value=\"\" id=\"J_qrLogonId\"/>\r\n        <input name=\"qrBizType\" type=\"hidden\" value=\"UNI_PC_MERCHANT\" id=\"J_qrBizType\"/>\r\n        <input name=\"qrDiscountText\" type=\"hidden\" value=\"\"\r\n               id=\"J_qrDiscountText\"/>\r\n        <input name=\"qrDiscountDesc\" type=\"hidden\" value=\"\"\r\n               id=\"J_qrDiscountDesc\"/>\r\n\r\n        <div class=\"ui-content\">\r\n\r\n\r\n            <div class=\"qrpay-content\">\r\n                <div class=\"ft-center\">\r\n                    <div data-role=\"qrPayArea\" class=\"qrcode-independence qrcode-area\" id=\"J_qrPayArea\">\n\n    <div>\n        <div class=\"qrcode-header\">\n            <div data-role=\"qrPayTitle\" class=\"qrcode-title ft-yh ft-black\">&nbsp;</div>\n            <div data-role=\"qrPayReward\" class=\"qrcode-reward ft-14 fn-hide\" style=\"background-color: #1a72c0;\">\n                <span data-role=\"qrPayRewardText\"></span><i data-role=\"qrPayRewardTipIcon\"\n                                                            class=\"iconfont qrcode-reward-question fn-hide\">&#xF04A;</i>\n            </div>\n        </div>\n\n        <div data-role=\"qrPayCrash\" class=\"qrcode-img-area fn-mb50 fn-hide\">\n            <div class=\"fn-pt20\">\n                <i class=\"iconfont qrpay-crash-icon\">&#xF047;</i>\n            </div>\n            <p class=\"ft-16\">二维码太忙了</p>\n\n            <p class=\"ft-16\">请稍后再试</p>\n            <a href=\"#\" class=\"mi-button mi-button-lwhite fn-mt50\" data-role=\"qrPayRefreshBtn\"\n               seed=\"qrcodeRefreshBtn\"><span\n                    class=\"mi-button-text\">&nbsp;&nbsp;&nbsp;&nbsp;重试&nbsp;&nbsp;&nbsp;&nbsp;</span></a>\n\n            <div class=\"qrpay-crash-explain fn-hide\" data-role=\"qrPayCrashExplainText\">\n                也可在左侧直接登录\n            </div>\n            <div class=\"qrpay-crash-explain fn-hide\" data-role=\"qrPayCrashExplainLink\">\n                也可以 <a href=\"#\" id=\"J_payStyleChange\" seed=\"changePayStyleLinkAfterCrash\">使用电脑支付</a>\n            </div>\n        </div>\n\n        <div data-role=\"qrPayImg\" class=\"qrcode-img-area\">\n            <div class=\"ui-loading qrcode-loading\" data-role=\"qrPayImgLoading\">加载中</div>\n        </div>\n\n    </div>\n    <div class=\"qrcode-foot\" data-role=\"qrPayFoot\">\n        <div data-role=\"qrPayExplain\" class=\"qrcode-explain fn-hide\">\n            <div>使用手机支付宝扫码完成付款</div>\n            <div><a href=\"https://mobile.alipay.com/index.htm\" data-boxUrl=\"https://cmspromo.alipay.com/down/new.htm\" data-role=\"dl-app\" target=\"_blank\"\n                    seed=\"qr-pay-download\">手机支付宝下载</a> ｜ <a\n                    href=\"https://help.alipay.com/lab/help_detail.htm?help_id=380925\" target=\"_blank\" seed=\"qr-pay-help\">如何使用？</a>\n            </div>\n        </div>\n        <div data-role=\"qrPayScanSuccess\" class=\"mi-notice mi-notice-success mi-notice-titleonly qrcode-notice fn-hide\">\n            <div class=\"mi-notice-cnt\">\n                <div class=\"mi-notice-title qrcode-notice-title\">\n                    <i class=\"iconfont qrcode-notice-iconfont\" title=\"扫描成功\">&#xF049;</i>\n\n                    <p class=\"qrcode-notice-bar\">扫码成功</p>\n\n                    <p class=\"mi-notice-explain-other qrcode-notice-explain\">\n                        请在手机支付宝上完成付款。\n                    </p>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class=\"fn-hide\" data-role=\"pr-container\">\n        <div class=\"qrcode-discount-privilege\">\n            <ul class=\"discount-list\">\n                <li class=\"discount-item\">\n                    <span class=\"action-rt\">\n                        <span class=\"action-rt-type\">惠</span>\n                        <span class=\"rt-discount\" data-role=\"pr-name\"></span>\n                    </span>\n                    | <em data-role=\"pr-explain\">使用扫码支付可享受优惠</em>\n                </li>\n                <li class=\"discount-desc\" data-role=\"pr-desc\"></li>\n            </ul>\n        </div>\n    </div>\n</div>\n\n\r\n                </div>\r\n\r\n                <div class=\"tb-inner tb-bank-intro\">\r\n                    <table>\r\n                        <tbody>\r\n                        <tr>\r\n                            <td class=\"msg-title\">\r\n                                交易金额\r\n                            </td>\r\n                            <td class=\"msg-cnt\">\r\n                                <strong class=\"order-amount\">3000.00</strong> 元\r\n                            </td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td class=\"msg-title\">\r\n                                支付方式\r\n                            </td>\r\n                            <td class=\"msg-cnt\">\r\n                                <img src=\"https://i.alipayobjects.com/e/201310/1JbfiPuIYX.png\" class=\"ft-middle\"/>\r\n                            </td>\r\n\r\n                        </tr>\r\n                        <tr>\r\n                            <td class=\"msg-title\">\r\n                                交易号\r\n                            </td>\r\n                            <td class=\"msg-cnt\">\r\n                                O160620884181294\r\n                            </td>\r\n\r\n                        </tr>\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n\r\n    </div>\r\n</div>\r\n\r\n\n \n<!-- uitpl:/component/tracker.vm -->\n\n\n\n\n<script type=\"text/javascript\">\nwindow.Smartracker && Smartracker.sow && Smartracker.sow();\n</script>\n\n\n\n\n\n\n<script type=\"text/javascript\">\n\nwindow.agp_custom_config = {\n  BASE_URL: '//kcart.alipay.com/p.gif',\n  TIMING_ACTION_URL: '//kcart.alipay.com/x.gif'\n}\n\n</script>\n<script charset=\"utf-8\" src=\"https://a.alipayobjects.com:443/g/memberAsset/securityMsg/1.0.3/index.js\"></script>\n\n\n\n\n\n<script>\n    sensScanConfig={\n        ratio: 0.01,\n        modules: '*',\n        types: '*'\n      };\n</script>\n\n<script src='https://as.alipayobjects.com/g/alipay_security/monitor-sens/1.0.1/monitor-sens.min.js'></script>\n\n\n\n\n\n\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\n\n\n\n\n<script>\ntry {\n  (function() {\n  var logServer = 'https://magentmng.alipay.com/m.gif';\n  var sample = 0.0001;\n  var url = \"https://a.alipayobjects.com/http-watch/1.0.7/index.js\";\n\n  // 判断比例\n  if (!!window.addEventListener && Array.prototype.map && Math.random() < sample) {\n    var HEAD = document.head || document.getElementsByTagName('head')[0];\n\n    var spt = document.createElement('script');\n    spt.src = url;\n    HEAD.appendChild(spt);\n\n\tsetTimeout(function() {\n\t  window.httpWatch && window.httpWatch({ sample: 1, appname: 'excashier-2-1-3.daily.alipaydev.com', logServer: logServer });\n\t}, 1000);\n  }\n  })();\n} catch(e) {}\n</script>\n\n\n\n\n<script>\nseajs.use('excashier/front/2016.04.25/standardQrcodeEmbedFront');\n\n\n\n</script>\n<div class=\"ui-poptip ui-poptip-white qrpay-discount-tip\" id=\"J_qrPayTip\">\n    <div class=\"ui-poptip-shadow\">\n        <div class=\"ui-poptip-container qrpay-discount-container\">\n            <div class=\"ui-poptip-arrow ui-poptip-arrow-10\">\n                <em></em>\n                <span></span>\n            </div>\n            <div class=\"ui-poptip-content\">\n                <p>使用扫码支付，不可与</p>\n                <p>支付宝其他优惠同时使用。</p>\n            </div>\n        </div>\n    </div>\n</div>\n</body>\n</html>\n\r\n\r\n
"""

print(ss)